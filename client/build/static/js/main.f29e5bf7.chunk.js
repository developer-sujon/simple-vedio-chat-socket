(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(16),i=n.n(s),r=n(75),o=n(4),u=n(11),l=n(12),d=n(23),j=n(22),b=n(121),m=n(120),O=n.p+"static/media/teams.f2eee889.svg",f=n(29),h=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"setName",value:function(e){sessionStorage.setItem("Name",e)}},{key:"getName",value:function(){return sessionStorage.getItem("Name")}},{key:"setPeerID",value:function(e){sessionStorage.setItem("PeerID",e)}},{key:"getPeerID",value:function(){return sessionStorage.getItem("PeerID")}},{key:"logOut",value:function(){sessionStorage.clear()}}]),e}(),v=n(2),x=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).logOut=function(){h.logOut(),e.setState({Redirect:!0})},e.pageRedirect=function(){!0===e.state.Redirect&&(window.location.href="/")},e.state={Redirect:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(v.jsx)("button",{onClick:this.logOut,className:"btn mx-1",children:Object(v.jsx)(f.b,{className:"bottom-nav-item"})});return null===h.getName()&&(e=Object(v.jsx)("span",{})),Object(v.jsxs)(c.Fragment,{children:[this.pageRedirect(),Object(v.jsx)(b.a,{className:"sticky-top",bg:"dark",children:Object(v.jsxs)(m.a,{fluid:!0,children:[Object(v.jsxs)(b.a.Brand,{href:"#home",children:[Object(v.jsx)("img",{className:"nav-icon",alt:"",src:O})," ",Object(v.jsx)("span",{className:"nav-item mx-2",children:"   Team Meet"})]}),e]})})]})}}]),n}(c.Component),N=n(35),p=n(68),g=n(45),C=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.UserList.length;return Object(v.jsx)("div",{className:" bottom-navbar   p-3 fixed-bottom container-fluid",children:Object(v.jsx)("div",{className:"row  justify-content-center",children:Object(v.jsx)("div",{className:"col-md-6 col-lg-6 text-center col-sm-12",children:Object(v.jsxs)("div",{className:"d-inline-flex",children:[Object(v.jsx)("button",{className:"btn mx-1",children:Object(v.jsx)(N.b,{className:"bottom-nav-item"})}),Object(v.jsx)("button",{className:"btn mx-1",children:Object(v.jsx)(p.a,{className:"bottom-nav-item"})}),Object(v.jsx)("button",{className:"btn mx-1",children:Object(v.jsx)(g.b,{className:"bottom-nav-item"})}),Object(v.jsx)("button",{className:"btn mx-1",children:Object(v.jsx)(g.a,{className:"bottom-nav-item"})}),Object(v.jsxs)("button",{className:"btn mx-1",children:[Object(v.jsx)(N.a,{className:"bottom-nav-item"})," ",Object(v.jsx)("span",{className:"badge",children:e})]})]})})})})}}]),n}(c.Component),y=n(69),w=n.n(y),k=n(30),L=new(function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,[{key:"NameRequired",value:function(){k.a.error(Object(v.jsx)("div",{className:"toast-text",children:"Your Name Required !"}),{position:"bottom-center"})}},{key:"RequestFail",value:function(){k.a.error(Object(v.jsx)("div",{className:"toast-text",children:"Request Fail ! Try Again !"}),{position:"bottom-center"})}},{key:"AnnounceInfo",value:function(e){k.a.info(Object(v.jsx)("div",{className:"toast-text",children:e}),{position:"bottom-center"})}}]),e}()),S=L.NameRequired,P=L.RequestFail,R=L.AnnounceInfo,I=n(70),U=n.n(I),D=n(71),J=n(5),M=n(122),A=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.UserList.map((function(e,t){return Object(v.jsxs)(M.a.Item,{children:[Object(v.jsx)(f.a,{className:"text-success"})," ",e.Name]})}));return Object(v.jsx)("div",{children:Object(v.jsx)(M.a,{className:"bg-dark",variant:"flush",children:e})})}}]),n}(c.Component),E=U.a.connect("/"),F=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).pageRedirect=function(){if(!0===e.state.Redirect)return Object(v.jsx)(J.a,{to:"/"})},e.creatPeerID=function(){var t=new w.a;e.setState({PeerObj:t}),t.on("open",(function(t){if(0!==t.length){var n=e.state.ConnectedPeerList;n.push(t),e.setState({ConnectedPeerList:n}),h.setPeerID(t),e.CreateNewUser(t),e.AnnounceNewJoiner(),e.GetJoinerList(),e.AnnounceLeftJoiner()}else P()}))},e.CreateNewUser=function(e){E.emit("CreateNewUser",{Name:h.getName(),PeerID:e})},e.AnnounceNewJoiner=function(){E.on("AnnounceNewJoiner",(function(e){R(e+" Joined");var t=new SpeechSynthesisUtterance;t.text=e+" Has Been Joined",window.speechSynthesis.speak(t)}))},e.AnnounceLeftJoiner=function(){E.on("AnnounceLeftJoiner",(function(e){R(e+" Left");var t=new SpeechSynthesisUtterance;t.text=e+" Has Been Left",window.speechSynthesis.speak(t)}))},e.GetJoinerList=function(){E.on("UserList",(function(t){e.setState({UserList:t}),t.map((function(t,n){e.CreateMutualConnection(t.PeerID),e.ReceiveMutualVideoCall(),e.CreateMutualVideoCall(t.PeerID)}))}))},e.GenerateSelfVideoPreview=function(){var t=document.createElement("video");t.muted=!0,navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(n){e.addVideoStream(t,n)}))},e.addVideoStream=function(e,t){var n=document.getElementById("video-grid");e.srcObject=t,e.setAttribute("width","280"),e.setAttribute("height","280"),e.classList.add("video-preview"),e.addEventListener("loadedmetadata",(function(){e.play()})),n.append(e)},e.CreateMutualConnection=function(t){if(!e.state.ConnectedPeerList.includes(t)){var n=e.state.PeerObj,c=n.connect(t);c.on("open",(function(){var n=e.state.ConnectedPeerList;n.push(t),e.setState({ConnectedPeerList:n}),c.send(h.getName())})),n.on("connection",(function(e){e.on("data",(function(e){console.log(e)}))}))}},e.CreateMutualVideoCall=function(t){if(!e.state.ConnectedPeerList.includes(t)){var n=e.state.PeerObj;navigator.mediaDevices.getUserMedia(e.state.Constraints).then((function(c){var a=n.call(t,c),s=document.createElement("video");a.on("stream",(function(t){e.addVideoStream(s,t)}))})).catch((function(){}))}},e.ReceiveMutualVideoCall=function(){e.state.PeerObj.on("call",(function(t){navigator.mediaDevices.getUserMedia(e.state.Constraints).then((function(e){t.answer(e),t.on("stream",(function(e){}))})).catch((function(){}))}))},e.state={UserList:[],Redirect:!1,PeerObj:null,ConnectedPeerList:[],Constraints:{video:!0,audio:!1}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){null!==h.getName()?(this.creatPeerID(),this.GenerateSelfVideoPreview()):this.setState({Redirect:!0})}},{key:"render",value:function(){return Object(v.jsxs)(c.Fragment,{children:[this.pageRedirect(),Object(v.jsx)(D.a,{children:Object(v.jsx)("title",{children:h.getName()})}),Object(v.jsx)(x,{}),Object(v.jsx)("div",{className:"container-fluid",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-md-10",children:Object(v.jsx)("div",{id:"video-grid"})}),Object(v.jsx)("div",{className:"col-md-2 ",children:Object(v.jsx)("div",{className:"user-list-section",children:Object(v.jsx)(A,{UserList:this.state.UserList})})})]})}),Object(v.jsx)(C,{UserList:this.state.UserList})]})}}]),n}(c.Component),V=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(u.a)(this,n),(c=t.call(this,e)).OnJoin=function(){0===c.state.name.length?S():(h.setName(c.state.name),c.setState({redirect:!0}))},c.pageRedirect=function(){if(!0===c.state.redirect)return Object(v.jsx)(J.a,{to:"/meet"})},c.state={name:"",redirect:!1},c}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(c.Fragment,{children:[Object(v.jsxs)("div",{className:"center text-center",children:[Object(v.jsx)("h3",{className:"nav-item",children:"Join Team"}),Object(v.jsx)("input",{onChange:function(t){e.setState({name:t.target.value})},placeholder:"Your Name",type:"text",className:"form-control text-center form-rounded mt-3"}),Object(v.jsx)("button",{onClick:this.OnJoin,className:"btn w-100 mt-3 btn-rounded btn-primary",children:"Start"})]}),this.pageRedirect()]})}}]),n}(c.Component),q=function(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(x,{}),Object(v.jsx)(V,{})]})},B=function(){return Object(v.jsx)(c.Fragment,{children:Object(v.jsxs)(J.d,{children:[Object(v.jsx)(J.b,{exact:!0,path:"/meet",render:function(e){return Object(c.createElement)(F,Object(o.a)(Object(o.a)({},e),{},{key:Date.now()}))}}),Object(v.jsx)(J.b,{exact:!0,path:"/",render:function(e){return Object(c.createElement)(q,Object(o.a)(Object(o.a)({},e),{},{key:Date.now()}))}})]})})},G=function(){return Object(v.jsx)(c.Fragment,{children:Object(v.jsx)(r.a,{children:Object(v.jsx)(B,{})})})};n(116),n(117);i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(G,{})}),document.getElementById("root"))},83:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=83}},[[118,1,2]]]);
//# sourceMappingURL=main.f29e5bf7.chunk.js.map